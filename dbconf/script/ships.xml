<?xml version="1.0" encoding="UTF-8"?>
<include>
	<!--  -->
	<table name="ships">
		<column name="slots" type="DBSlotsBean">
	    	<annotation>@XMLReflectionField</annotation>
		</column>
		<select name="ByPrimaryKey" single_object="true">
			<column name="ship_id"/>
		</select>
		<select name="ActualShipsList">
			<column name="is_special" condition="=" value="0"/>
			<sort>ship_name</sort>
		</select>
		<select name="ByUniq" single_object="true">
			<column name="ship_uniq"/>
		</select>
		<update name="ByPrimaryKey">
			<column name="ship_id"/>
		</update>
		<delete name="ByPrimaryKey">
			<column name="ship_id"/>
		</delete>
	</table>
	<!--  -->
	<table name="slots">
		<select name="ByPrimaryKey" single_object="true">
			<column name="slot_id"/>
		</select>
		<select name="ByUniq" single_object="true">
			<column name="slot_uniq"/>
		</select>
		<update name="ByPrimaryKey">
			<column name="slot_id"/>
		</update>
		<delete name="ByPrimaryKey">
			<column name="slot_id"/>
		</delete>
		<!-- 
		<query name="ByUniq" use="Slots" single_object="true">
			<column name="Uniq" type="String"/>
			<sql>
				SELECT s.*
				FROM slots s
				WHERE LOWER(s.slot_uniq) = ?
				LIMIT 1
			</sql>
		</query>
		 -->
	</table>
	<table name="ship_slots">
		<select name="ByPrimaryKey" single_object="true">
			<column name="ship_id"/>
			<column name="slot_id"/>
		</select>
		<update name="ByPrimaryKey">
			<column name="ship_id"/>
			<column name="slot_id"/>
		</update>
		<delete name="ByPrimaryKey">
			<column name="ship_id"/>
			<column name="slot_id"/>
		</delete>
		<query name="SetDeletedByShipId">
			<column name="ShipId" type="long"/>
			<sql>
				UPDATE ship_slots SET can_deleted = 1 WHERE ship_id = ? 
			</sql>
		</query>
		<query name="FailSlotsByShipId">
			<column name="ShipId" type="long"/>
			<sql>
				DELETE FROM ship_slots WHERE ship_id = ? AND can_deleted = 1 
			</sql>
		</query>
	</table>
</include>